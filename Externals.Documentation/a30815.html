<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Documentation: Оформление кода</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Title.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Documentation
   &#160;<span id="projectnumber">Version: 2.1.0 Revision: 396 Platform: x64 Build: 11:52 06.06.2018</span>
   </div>
   <div id="projectbrief">Sample documentation solution architecture.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Поиск');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a30815.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Оформление кода </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Форматирование кода </h2>
<h3>Файл настроек AStyle для форматирования кода</h3>
<div class="fragment"><div class="line">--suffix=none</div><div class="line">--exclude=.svn --exclude=(Documentation) --exclude=Externals --ignore-exclude-errors</div><div class="line"></div><div class="line">--style=allman</div><div class="line">--indent=spaces=2</div><div class="line">--indent-switches</div><div class="line">--indent-preproc-block</div><div class="line">--indent-col1-comments</div><div class="line">--min-conditional-indent=0</div><div class="line">--max-continuation-indent=80</div><div class="line">--break-blocks</div><div class="line">--pad-oper</div><div class="line">--pad-header</div><div class="line">--unpad-paren</div><div class="line">--align-pointer=middle</div><div class="line">--align-reference=middle</div><div class="line">--add-braces</div><div class="line">--keep-one-line-blocks</div><div class="line">--close-templates</div><div class="line">--max-code-length=80</div><div class="line">--break-after-logical</div><div class="line">--lineend=windows</div></div><!-- fragment --><p><a class="anchor" id="IdentifiersAnchor"></a> </p><h3>Правила именования идентификаторов</h3>
<div class="fragment"><div class="line"><span class="keyword">class </span><a class="code" href="a30813.html">ClassName</a></div><div class="line">class IInterfaceName</div><div class="line">template&lt;class TTemplateParam&gt;</div><div class="line">using ClassName_t = ...</div><div class="line">  </div><div class="line">ClassFunctionName</div><div class="line">GlobalFunctionName</div><div class="line">IsFunctionReturnBool</div><div class="line">(*fnCallBackFunction)</div><div class="line">  </div><div class="line">m_ClassMemberVariable</div><div class="line">_FunctionParamVariable</div><div class="line">LocalVariable</div><div class="line">IsBoolVariable</div><div class="line">pPointerName</div><div class="line">itIterator(ritReverseIterator)</div><div class="line">iIndexValue</div><div class="line">  </div><div class="line">MemberEnum</div><div class="line">FUCKING_DEFINE_MACROS</div><div class="line">CONSTANTS</div></div><!-- fragment --><h2>Общие </h2>
<ul>
<li>Использовать RTTI исключительно в тестах или для логирования работы программы.</li>
<li>В качестве целых типов использовать типы, определенные в &lt;cstdint&gt; и size_t.</li>
<li>Не использовать беззнаковые типы данных, такие как uint32_t (за исключением маски), например, чтобы показать что значение переменной не может быть отрицательным. Для этой цели использовать assert’ы.</li>
<li>Использовать assert(... &amp;&amp; "message");</li>
<li>Использовать макросы только в случае крайней необходимости, делать #undef сразу после использования.</li>
<li>Директивы препроцессора должны иметь отступ после #.</li>
<li>Для условной компиляции (debug и release версий, например) использовать не директивы компилятора, а "const bool debug = true;".</li>
<li>Вместо массивов и оператора new[] использовать std::vector.</li>
<li>Хранить в контейнерах stl не объекты, а указатели или shared_ptr'ы.</li>
<li>Использовать постинкремент (i++) только для простых типов, для итераторов и шаблонных типов - ++it.</li>
<li>Объявлять не изменяющиеся переменные как константы (даже в параметрах функций).</li>
<li>Все enum'ы оборачивать в класс (<a class="el" href="a30815.html#Example1Anchor">пример</a>).</li>
<li>Интерфейсный класс должен содержать только чисто виртуальные функции и статические методы.</li>
<li>Множественное наследование допустимо только от интерфейсных классов.</li>
<li>Открытые функции (интерфейс класса) лучше делать не виртуальными, а виртуальными - закрытые или защищенные (паттерн NVI).</li>
<li>В открытых функциях классов использовать проверку параметров с бросанием исключений, в закрытых - assert’ы.</li>
<li>Чрезмерное использование встроенных функций может сделать программу медленней. На современных процессорах меньший код обычно исполняется быстрее из-за лучшего использования командного кэша.</li>
<li>Статические переменные класса всегда "заворачивать" в функции.</li>
<li>Не константные статические переменные нельзя использовать в многопоточном коде.</li>
<li>Переменные класса должны быть закрытыми и функций доступа к ним не должно быть вообще или она должна быть только одна (SetValue() <b>или</b> GetValue()).</li>
<li>При передаче в функцию nullptr, boolean или символьных целых значений следует их комментировать или писать самодокументирующийся код используя константы (<a class="el" href="a30815.html#Example2Anchor">пример</a>).</li>
<li>Исключения не должны пересекать границы модулей/подсистем.</li>
<li>Комментирование кода производить в стиле Doxygen.</li>
</ul>
<h2>Заголовочные файлы </h2>
<ul>
<li>Заголовочные файлы должны иметь расширение .hpp.</li>
<li>В начале заголовочного файла ставить "#pragma once".</li>
<li>Не использовать #include, когда достаточно предварительного объявления.</li>
<li>Определение класса должно начинаться с открытых функций, затем должны идти защищенные функции и переменные, затем - закрытые. После закрытых функций должны быть объявлены конструкторы и деструкторы.</li>
<li>Объявления дружественных тестовых функций должны находиться в самом конце объявления класса.</li>
<li>В объявлениях функций без параметров всегда явным образом писать void (чтобы визуально отличать объявление функции от ее вызова).</li>
<li>В каждом заголовочном файле должна быть только одна сущность (класс, общий перечислитель, константы и т.д.).</li>
</ul>
<h2>Файлы определений </h2>
<ul>
<li>Файлы определений должны иметь расширение .cpp (файл определения шаблонных и inline-функций - .inl).</li>
<li>Порядок следования заголовочных файлов: библиотеки C, библиотеки C++, .hpp файлы других библиотек, .hpp файлы текущего проекта.</li>
<li>Определение вложенного класса должно находиться в отдельном .cpp файле.</li>
<li>В .cpp файле первыми должны идти конструкторы и деструктор, затем все остальные функции в порядке их объявления.</li>
<li>В определении функции, объявленной как override (virtual, static) ставить <div class="fragment"><div class="line"><span class="keywordtype">int</span> ClassName::GetValue(<span class="keywordtype">void</span>) <span class="comment">/*override*/</span></div><div class="line">{</div><div class="line">  <span class="comment">// ...</span></div><div class="line">}</div><div class="line">  </div><div class="line"><span class="comment">/*static*/</span> <span class="keywordtype">void</span> ClassName::DoProcess(<span class="keywordtype">void</span>) </div><div class="line">{</div><div class="line">  <span class="comment">// ...</span></div><div class="line">}</div></div><!-- fragment --></li>
<li>В определении функции сначала ставить входные, затем выходные параметры.</li>
<li>Параметры, являющиеся результатом работы функции должны передаваться через указатели(ссылки - только константные!).</li>
<li>Параметры, являющиеся результатом работы функции, должны быть помечены комментарием <b>out</b> <div class="fragment"><div class="line"><span class="keywordtype">void</span> GetValue(<span class="comment">/*out*/</span> <span class="keywordtype">int</span> * _pValue);</div></div><!-- fragment --></li>
</ul>
<h2>Правила именования переменных/функций/классов/файлов </h2>
<ul>
<li>Имена переменных должны быть существительными, функций - глаголами/командами.</li>
<li>Имена файлов должны совпадать с именами объявленных в них классов (включая пространство имен).</li>
<li><a class="el" href="a30815.html#IdentifiersAnchor">Правила именования идентификаторов</a>.</li>
</ul>
<h2>Пространства имен </h2>
<ul>
<li>Каждый отдельный модуль программы должен иметь свое пространство имен.</li>
<li>Не использовать директиву using namespace вне функций.</li>
<li>Пространство имен должно завершаться комментарием "} // namespace &lt;name&gt;".</li>
<li>Код внутри пространства имен должен идти по левому краю.</li>
<li>Вместо статических констант использовать константы в не именованных пространствах имен (использовать их в заголовочных файлах только для объявления констант!).</li>
</ul>
<h2>Конструкторы/деструкторы </h2>
<ul>
<li>Всегда явным образом определять конструктор по умолчанию, инициирующий внутренние переменные класса.</li>
<li>Использовать ключевое слово explicit для конструкторов с одним аргументом.</li>
<li>Если класс не имеет явного конструктора копирования, наследовать его от boost::noncopyable.</li>
<li>Деструктору всегда явным образом указывать noexcept.</li>
</ul>
<h1>Примеры </h1>
<p><a class="anchor" id="Example1Anchor"></a> </p><h2>Пример 1 </h2>
<div class="fragment"><div class="line"><span class="comment">// Объявление:</span></div><div class="line"><span class="keyword">class </span>Status</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">enum</span> Value : <span class="keywordtype">size_t</span></div><div class="line">  {</div><div class="line">    Unknown = 0,</div><div class="line">    Play,</div><div class="line">    Pause,</div><div class="line">    Stop,</div><div class="line">      </div><div class="line">    Illegal</div><div class="line">  };</div><div class="line">};</div><div class="line">  </div><div class="line"><span class="comment">// Использование</span></div><div class="line">Status::Value CurrentStatatus = Status::Stop;</div></div><!-- fragment --><p><a class="anchor" id="Example2Anchor"></a> </p><h2>Пример 2 </h2>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">bool</span> IsSsuccess = CalculateSomething(InterestingValue,</div><div class="line">  10,</div><div class="line">  <span class="keyword">false</span>,</div><div class="line">  NULL); <span class="comment">// Что означают все эти аргументы??</span></div></div><!-- fragment --><p>вместо:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">bool</span> IsSuccess = CalculateSomething(InterestingValue,</div><div class="line">  10,       <span class="comment">// Базовое значение по умолчанию</span></div><div class="line">  <span class="keyword">false</span>,    <span class="comment">// Функция вызывается не в первый раз.</span></div><div class="line">  <span class="keyword">nullptr</span>); <span class="comment">// Без возвратной функции.</span></div></div><!-- fragment --><p>Или, в качестве альтернативы, используя константы или само-описывающие переменные:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">int</span> DefaultBaseValue = 10;</div><div class="line"><span class="keyword">const</span> <span class="keywordtype">bool</span> IsFirstTimeCalling = <span class="keyword">false</span>;</div><div class="line">Callback * fnNullCallback = <span class="keyword">nullptr</span>;</div><div class="line">  </div><div class="line"><span class="keyword">const</span> <span class="keywordtype">bool</span> IsSuccess = CalculateSomething(InterestingValue,</div><div class="line">  DefaultBaseValue,</div><div class="line">  IsFirstTimeCalling,</div><div class="line">  fnNullCallback);</div></div><!-- fragment --><h1>Под вопросом </h1>
<ul>
<li>Запятые в списке инициализации переменных в конструкторе ставить после переменной.</li>
<li>Вместо &lt;iostream&gt; в заголовочных файлах писать &lt;iosfwd&gt; для ускорения компиляции.</li>
<li>Для быстрого копирования потоков ввода - вывода(из одного в другой), использовать функцию потока .rdbuf() (cout &lt;&lt; file.rdbuf()).</li>
<li>С помощью функции std::uncaught_exception можно проверить, как завершает работу функция: это нормальный возврат или было выброшено исключение.</li>
<li>Преобразовывайте тип числа с плавающей точкой в целочисленный тип исключительно через функции стандартной библиотеки(«round», «floor», «ceil» и т.п.)</li>
<li>Для инициализации переменных использовать списки инициализации (они не позволяют сужение типов: int x1 = { 7.3 }; //compilation error).</li>
<li>Профайлер не может подсказать, какие inline функции не должны быть встраиваемыми!</li>
<li>Строки хранить в отдельном файле (лучше.cpp).</li>
<li>Исключение не должно покидать деструктор (особенно это касается работы с контейнерами STL).</li>
<li>Для класса предоставлять функцию swap() (она должна быть бессбойной!), которую можно использовать для присваивания со строгими гарантиями безопасности (для примитивных типов использовать std::swap()) <div class="fragment"><div class="line">T &amp; T::operator= (T Temp) <span class="comment">// По значению!</span></div><div class="line">{</div><div class="line">  swap(Temp);</div><div class="line">  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line">}</div></div><!-- fragment --></li>
<li>Для отсортированного набора объектов можно использовать индексные контейнеры, содержащие итераторы на основной контейнер.</li>
<li>Для добавления элементов в контейнер предпочтительнее использовать операции с диапазонами.</li>
<li>container&lt;T&gt;(c).swap(c); // Удаление всей лишней (зарезервированной) емкости контейнера.</li>
<li>container&lt;T&gt;().swap(c); // Удаление всех элементов и очистка памяти контейнера.</li>
<li>find / find_if и count / count_if - поиск в неотсортированном диапазоне.</li>
<li>lower_bound, upper_bound, equal_range(реже binary_search) - поиск в отсортированном диапазоне.</li>
<li>Функциональные объекты должны содержать константный operator().</li>
<li>Побочные подзадачи выделять в отдельный код. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">notitle</a></li><li class="navelem"><a class="el" href="a30830.html">Структура решения</a></li>
    <li class="footer">Документация по Documentation. Последние изменения: Ср 6 Июн 2018 11:52:53. Создано системой
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
