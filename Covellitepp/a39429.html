<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151583584-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-151583584-1');
    </script>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta name="generator" content="Doxygen 1.12.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Covellite++: Covellite.Expanse</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Title.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Covellite++
   &#160;<span id="projectnumber">Version: 2.3.0 Revision: ??? Platform: x64 Build: 12:11 06.12.2024</span>
   </div>
   <div id="projectbrief">Кроссплатформенный фреймворк для разработки приложений на С++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Поиск',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('a39429.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Загрузка...</div>
<div class="SRStatus" id="Searching">Поиск...</div>
<div class="SRStatus" id="NoMatches">Не найдено</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Covellite.Expanse</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Список классов проекта <a class="el" href="a37804.html">Expanse</a></p>
<h2>Введение </h2>
<p>Проект классов рендеринга 3D сцены.   </p>
<h2>Назначение </h2>
<p>Классы проекта позволяют добавлять дополнительное окно перед окном Gui для рендеринга 3D сцены и манипуляции объектами более высокого уровня (игровые/3D объекты как наборы компонентов/рендеров) по сравнению с отдельными компонентами/рендерами, предоставляемыми <a class="el" href="a39418.html">Covellite.Api</a>.</p>
<p>Класс окна этого проекта является необязательным (можно обойтись только окном проекта <a class="el" href="a39431.html">Covellite.Gui</a>), при его добавлении перед окном Gui будут отрисовываться сначала содержащиеся в нем 3D объекты, а уже поверх 3D сцены будет отрисовано Gui.</p>
<h2>Диаграмма классов проекта </h2>
<p>Классы проекта рассчитаны на рендеринг 3D сцены с учетом следующих возможностей:</p><ul>
<li>Обновление требуется для всех игровых объектов, а рендеринг - только для находящихся в поле зрения камеры.</li>
<li>Разбиение сцены на ячейки (квадродерево) для минимизации количества проверок попадания объектов в поле зрения камеры.</li>
<li>Использование уровней LOD (гарантированно дает выигрыш для высокополигональных объектов).</li>
<li>Рендеринг в несколько проходов для отрисовки теней, отложенного освещения и постобработки.</li>
</ul>
<div class="image">
<img src="Expanse.Classes.png" alt=""/>
</div>
<h2>Использование </h2>
<p>Классы проекта создавались в расчете на логику использования, при которой формируются объекты, содержащие компонент обновления, при активации добавляющие идентификаторы своих объектов в очередь нужного прохода рендеринга, а после рендеринга сцены список рендеринга очищается.</p>
<p>C точки зрения здравого смысла игровая сцена может содержать следующие виды игровых объектов:</p>
<ul>
<li><b>Ландшафт</b> (большое количество малополигональных объектов: ячейки поверхности, трава, камни, кусты, мусор):<ul>
<li>Единый объект для каждого типа объектов, рендерится всегда при помощи инстансинга.</li>
<li>Единый компонент обновления, который добавляет идентификаторы всех объектов всех типов в очередь рендеринга.</li>
<li>При рендеринге в функции обратного вызова инстанс-буфера удалившиеся от камеры ячейки заменяются приблизившимися (первый раз придется проверить все, затем можно заменять только те, что выпали из поля зрения камеры на те, что попали, таких ячеек между кадрами будет очень мало).</li>
</ul>
</li>
<li><b>Статические</b> объекты (среднее количество среднеполигональных объектов: деревья, дома, стены и т.п.):<ul>
<li>Каждый объект рендеринтся сам по себе.</li>
<li>Обновление для каждого объекта не требуется, но они должны содержаться в ячейке-контейнере квадродерева, комопнент обновления которой добавляет идентификаторы расположенных в нем объектов в очередь рендеринга.</li>
<li>При рендеринге требуется отбрасывать объекты, не попадающие в поле зрения камеры, при этом квадродерево можно формировать на стадии добавления объектов в сцену.</li>
</ul>
</li>
<li><b>Акторы</b> (небольшое количество высокополигональных анимированных объектов: персонаж, NPC, враги, монстры):<ul>
<li>Каждый объект рендерится как группа отдельных объектов разной внешности/экипировки.</li>
<li>При обновлении требуется перемещение/действие в независимости от попадания в поле зрения камеры (анимации обновляются в функции обратного вызова вертексного буфера, которая вызывается только при рендеринге, т.е. автоматически только для видимых объектов).</li>
<li>При рендеринге требуется отбрасывать объекты, не попадающие в поле зрения камеры (возможно, имеет смысл отбрасывать части модели, расположенной рядом с камерой) и использовать уровни LOD.</li>
</ul>
</li>
</ul>
<p>Для отрисовки 3D сцены необходимо при старте программы:</p>
<ul>
<li>Создать объект класса окна <a class="el" href="a38521.html" title="Класс входит в проект Covellite.Expanse   Класс окна, предоставлющего клиентскому коду возможности пр...">covellite::expanse::Window</a> (после окна <a class="el" href="a38149.html" title="Класс входит в проект Covellite.Api   Класс окна-фасада для скрытия реализаций конкретных графических...">covellite::api::Window</a>, но ранее окна <a class="el" href="a38697.html" title="Класс входит в проект Covellite.Gui   Класс окна, отрисовывающий GUI.">covellite::gui::Window</a>).</li>
<li>Создать объект класса игрового мира (клиентский код, объект создается после окна <a class="el" href="a38521.html" title="Класс входит в проект Covellite.Expanse   Класс окна, предоставлющего клиентскому коду возможности пр...">covellite::expanse::Window</a> и получает ссылку на него), который настраивает создание базовых игровых объектов, существующих всегда (таких, которые удаляются только при разрушении объекта игрового мира):<ul>
<li>Ландшафт.</li>
<li>Базовая ячейка квадродерева (вложенные ячейки которой создаются и удаляются по мере движения камеры) формирует объект обновления, который при вызове (рекурсивно для дочерних ячеек) создает и удаляет статичные игровые объекты при движении камеры, проверяет видимость ячейки, в случае удачной проверки проверяет дочерние ячейки и объекты, добавляет попавшие в поле зрения камеры объекты в список на рендеринг с упорядочиванием по расстоянию до камеры.</li>
<li>Особая ячейка-контейнер для всех акторов сцены, компоненты обновления которых формируют список рендеринга видимых акторов из идентификаторов требуемого уровня LOD.</li>
</ul>
</li>
</ul>
<p>Многопроходной рендеринг:</p>
<ul>
<li>Первый проход: рендеринг игровых объектов, расположенных рядом с камерой в буфер глубины для последующего расчета теней.</li>
<li>Второй проход: рендеринг попавших в поле зрения камеры объектов в несколько внеэкранных поверхностей (цвет, нормали, ...)</li>
<li>Третий проход: отложенное освещение и постпроцессинг с использованием внеэкранных поверхностей, заполненных на предыдущих проходах. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">index</a></li><li class="navelem"><a class="el" href="a39411.html">Структура решения</a></li>
    <li class="footer">Документация по Covellite++. Последние изменения: Пт 6 Дек 2024 12:11:43. Создано системой <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
