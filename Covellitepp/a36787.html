<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Covellite++: Создание базового проекта приложения</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Title.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Covellite++
   &#160;<span id="projectnumber">Version: 2.2.2 Revision: 1961 Platform: x64 Build: 21:24 03.09.2019</span>
   </div>
   <div id="projectbrief">Кроссплатформенный (Windows/Android) GUI фреймворк для разработки приложений на С++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Поиск');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a36787.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Создание базового проекта приложения </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><ul>
<li>Создать проект сборки основного модуля программы (<a class="el" href="a36787.html#MainModuleWindowsUsingFrameworkAnchor">Windows</a>/ <a class="el" href="a36787.html#MainModuleAndroidUsingFrameworkAnchor">Android</a>).</li>
</ul>
<p>Создать <a class="el" href="a36787.html#MainApplicationClassUsingFrameworkAnchor">класс</a> программы.</p><ul>
<li>Добавить рализациию функции установки <a class="el" href="a36787.html#SettingsUsingFrameworkAnchor">параметров</a> фреймворка по умолчанию.</li>
<li>Добавить реализацию функции создания <a class="el" href="a36787.html#ReadFileDataUsingFrameworkAnchor">объекта виртуальной файловой системы</a>, который будет использоваться программой для чтения данных из файлов.</li>
</ul>
<p><a class="anchor" id="MainModuleWindowsUsingFrameworkAnchor"></a> </p><h2>Создание проекта сборки основного модуля программы для Windows </h2>
<p>Создать <b>пустой</b> проект приложения Windows:</p>
<div class="image">
<img src="Vs2015.Windows.png" alt=""/>
</div>
<p>Добавить в проект .ico файл иконки программы и .rc файл, определяющий иконку программы как <b>ApplicationIcon</b> (именно эта иконка будет отображаться в заголовке окна программы):</p>
<div class="fragment"><div class="line"> </div>
<div class="line">ApplicationIcon ICON  &quot;ApplicationIcon.ico&quot;</div>
</div><!-- fragment --><dl class="section note"><dt>Заметки</dt><dd><ul>
<li>В качестве заголовка окна программы будет использовано значение макроса <b>__APPLICATION_NAME__</b> из файла версии решения.</li>
<li>Режим работы (полноэкранный/оконный), размеры и цвет фона окна программы задаются в <a class="el" href="a36787.html#SettingsUsingFrameworkAnchor">настройках</a> приложения.</li>
</ul>
</dd></dl>
<p><a class="anchor" id="MainModuleAndroidUsingFrameworkAnchor"></a> </p><h2>Создание проекта сборки основного модуля программы для Android </h2>
<h3>Создание проекта сборки .apk файла программы</h3>
<p>Создать "Простое приложение Android":</p>
<div class="image">
<img src="Vs2015.Android.png" alt=""/>
</div>
<p>Добавить в его java код перехват функции dispatchKeyEvent() (<a class="el" href="a36794.html">как это делается и зачем это нужно</a>).</p>
<p><a class="el" href="a36785.html">Фоновое выполнение задач в коде С++</a></p>
<dl class="section note"><dt>Заметки</dt><dd>Чтобы программа работала в полноэкранном режиме (без статус-бара), необходимо добавить в AndroidManifest.xml <div class="fragment"><div class="line">&lt;application ... android:theme=<span class="stringliteral">&quot;@android:style/Theme.Holo.NoActionBar.Fullscreen&quot;</span>&gt;</div>
</div><!-- fragment --></dd></dl>
<h3>Создание проекта сборки главного модуля программы</h3>
<p>Создать проект .so файла (который будет загружаться при старте NativeActivity):</p>
<div class="image">
<img src="Vs2015.So.png" alt=""/>
</div>
<p>Проекту Packaging добавить его в ссылки, а в AndroidManifest.xml добавить запись загрузки именно этого модуля ([подробнее](<a class="el" href="a36794.html">Ввод русских букв с клавиатуры</a>)).</p>
<p><a class="anchor" id="MainApplicationClassUsingFrameworkAnchor"></a> </p><h2>Создание класса программы </h2>
<p><b>Класс</b> <b>программы</b> содержит главный цикл обработки сообщений, отвечает за обработку системных сообщений и создание/разрушение главного окна программы.</p>
<dl class="section note"><dt>Заметки</dt><dd>При написании кода следует учитывать, что NativeActivity загружает главный модуль программы только один раз, при первом запуске программы, после чего при каждой последующей активации программы вызывает функцию точки входа. При этом объект класса программы будет создаваться каждый раз заново, но все статические объекты будут иметь состояния, унаследованные от предыдущей активации.</dd></dl>
<p>Создать класс-наследник от <a class="el" href="a35687.html" title="Класс входит в проект Covellite.App   Базовый класс приложения для Android.">covellite::app::Application</a>, конструктору которого передать способ отрисовки окна приложения (по событию или непрерывно), подписаться на необходимые события и добавить код обработки этих событий.</p>
<div class="fragment"><div class="line"><a class="code" href="a36491.html#a3dd1c639961a5e122c07f15ce0041771">ExampleApp::ExampleApp</a>(<span class="keywordtype">void</span>) noexcept :</div>
<div class="line">  Application(Continuous{})</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">using namespace </span>::covellite;</div>
<div class="line">    </div>
<div class="line">  m_Events[events::Application.Start]</div>
<div class="line">    .Connect([&amp;]() { DoInitWindow(); } );</div>
<div class="line">  m_Events[events::Error.Exception]</div>
<div class="line">    .Connect([](<span class="keyword">const</span> events::Error_t::Description &amp; _Description)</div>
<div class="line">      { LOGGER(Error) &lt;&lt; _Description.c_str(); });</div>
<div class="line">  <span class="comment">// ...</span></div>
</div><!-- fragment --><p> <a class="el" href="a34959.html">События</a>, которые может обрабатывать приложение.</p>
<dl class="section note"><dt>Заметки</dt><dd>Подписка на событие <b>Application.Start</b> обязательна, в обработчике следует создать набор окон программы; в качестве класса главного окна программы следует указать ранее созданный класс. <br  />
 Подписка на собыие <b>Application.Exit</b> не требуется, окно будет уничтожено автоматически.</dd></dl>
<ul>
<li><b><a class="el" href="a36495.html" title="Класс входит в проект Example   Класс GUI окна программы.">ExampleWindow</a></b> - класс главного окна программы (см. <a class="el" href="a36793.html">Создание кода панелей GUI</a>).</li>
<li><b>ExtraWindow</b> - класс окна программы, обеспечивающий предварительную отрисовку в окне, поверх которой будeт отображаться панели GUI (например, это может быть сцена из 2D (<a class="el" href="a36789.html">Отрисовка 2D объектов</a>) или 3D (<a class="el" href="a36791.html">Отрисовка 3D объектов</a>) объектов).</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="a36491.html#aaddf7b9a3ba89e61506f87d2ca3c149d">ExampleApp::DoInitWindow</a>(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">  LOGGER(Info) &lt;&lt; <span class="stringliteral">&quot;Create main window.&quot;</span>;</div>
<div class="line">    </div>
<div class="line">  <span class="comment">// Создание обязательного набора объектов окон приложения.</span></div>
<div class="line">    </div>
<div class="line">  MakeWindow&lt;ExampleWindow&gt;(                         <span class="comment">// Клиентсткий код программы, управляющий</span></div>
<div class="line">                                                     <span class="comment">// переходами между разными слоями GUI.</span></div>
<div class="line">    MakeWindow&lt;::covellite::gui::Window&gt;(            <span class="comment">// Класс фреймворка, обеспечивающий отрисовку GUI.</span></div>
<div class="line">      MakeWindow&lt;BasementWindow&gt;(                    <span class="comment">// Клиентский код, отрисовывающий 3D сцену.</span></div>
<div class="line">        MakeWindow&lt;::covellite::api::Window&gt;(        <span class="comment">// Класс фреймворка окна графического Api</span></div>
<div class="line">                                                     <span class="comment">// (реализация (OpenGL или DirectX) задается в настройках).</span></div>
<div class="line">          MakeWindow&lt;::covellite::os::Window&gt;(*<span class="keyword">this</span>) <span class="comment">// Класс фреймворка окна операционной системы.</span></div>
<div class="line">            ))));</div>
<div class="line">}</div>
</div><!-- fragment --><p> Для создания точки входа программы использовать макрос <b>APPLICATION_ENTRY_POINT</b>, в качестве параметра которого указать имя созданного класса программы.</p>
<div class="fragment"><div class="line"><a class="code" href="a34955.html#gad03011d9bf6bfcedf9031a4d7cddebfd">APPLICATION_ENTRY_POINT</a>(<a class="code" href="a36491.html">ExampleApp</a>);</div>
</div><!-- fragment --><p> <a class="anchor" id="SettingsUsingFrameworkAnchor"></a> </p><h2>Настройки </h2>
<h3>Для всех платформ</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Параметр  </th><th class="markdownTableHeadLeft">Раздел  </th><th class="markdownTableHeadLeft">Описание   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">PathToFontsDirectory  </td><td class="markdownTableBodyLeft">Root  </td><td class="markdownTableBodyLeft">Путь к папке расположения шрифтов, которые используются в .rcss файлах.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">R  </td><td class="markdownTableBodyLeft">Root\Window\BackgroundColor  </td><td class="markdownTableBodyLeft">Цвет фона окна программы по умолчанию: красная компонента [0...255].   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">G  </td><td class="markdownTableBodyLeft">Root\Window\BackgroundColor  </td><td class="markdownTableBodyLeft">Цвет фона окна программы по умолчанию: зеленая компонента [0...255].   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">B  </td><td class="markdownTableBodyLeft">Root\Window\BackgroundColor  </td><td class="markdownTableBodyLeft">Цвет фона окна программы по умолчанию: синяя компонента [0...255].   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">A  </td><td class="markdownTableBodyLeft">Root\Window\BackgroundColor  </td><td class="markdownTableBodyLeft">Цвет фона окна программы по умолчанию: прозрачность [0...255].   </td></tr>
</table>
<h3>Только для Windows</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Параметр  </th><th class="markdownTableHeadLeft">Раздел  </th><th class="markdownTableHeadLeft">Описание   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">GraphicsApi  </td><td class="markdownTableBodyLeft">Root\Window  </td><td class="markdownTableBodyLeft">Используемый для рендеринга графический Api (Auto, DirectX11, DirectX10, OpenGL).   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">IsFullScreen  </td><td class="markdownTableBodyLeft">Root\Window  </td><td class="markdownTableBodyLeft">Полноэкранный/оконный режим работы программы.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">IsResized  </td><td class="markdownTableBodyLeft">Root\Window  </td><td class="markdownTableBodyLeft">Разрешение/запрет изменения размеров окна программы мышью.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Width  </td><td class="markdownTableBodyLeft">Root\Window\Size  </td><td class="markdownTableBodyLeft">Ширина клиентской области окна программы.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Height  </td><td class="markdownTableBodyLeft">Root\Window\Size  </td><td class="markdownTableBodyLeft">Высота клиентской области окна программы.   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyLeft">MinClientWidth  </td><td class="markdownTableBodyLeft">Root\Window\Size  </td><td class="markdownTableBodyLeft">Минимальная ширина клиентской области окна программы.   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">MinClientHeight  </td><td class="markdownTableBodyLeft">Root\Window\Size  </td><td class="markdownTableBodyLeft">Минимальная высота клиентской области окна программы.   </td></tr>
</table>
<h3>Только для Android</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Параметр  </th><th class="markdownTableHeadLeft">Раздел  </th><th class="markdownTableHeadLeft">Описание   </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">GraphicsApi  </td><td class="markdownTableBodyLeft">Root\Window  </td><td class="markdownTableBodyLeft">Используемый для рендеринга графический Api (Auto, OpenGLES).   </td></tr>
</table>
<h3>Настройки по умолчанию</h3>
<p>В код проекта необходимо также добавить реализацию функции установки значений параметров по умолчанию. Функция <b>в</b> <b>обязательном</b> <b>порядке</b> должна устанавливать значения по умолчанию для всех параметров.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;stdafx.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Covellite/App/Settings.hpp&gt;</span></div>
<div class="line">  </div>
<div class="line"><span class="keyword">namespace </span>alicorn</div>
<div class="line">{</div>
<div class="line">  </div>
<div class="line"><span class="keyword">namespace </span>extension</div>
<div class="line">{</div>
<div class="line">  </div>
<div class="line"><span class="keyword">namespace </span>std</div>
<div class="line">{</div>
<div class="line">  </div>
<div class="line"><span class="keyword">template</span>&lt;&gt;</div>
<div class="line"><span class="comment">/*static*/</span> SectionPtr_t Singleton&lt;Section_t&gt;::Make(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">auto</span> pSettings = ::std::make_unique&lt;Section_t&gt;(uT(<span class="stringliteral">&quot;Covellitepp&quot;</span>));</div>
<div class="line">    </div>
<div class="line">  <span class="comment">// Функция AddExtra() используется для параметров, которые не должен менять</span></div>
<div class="line">  <span class="comment">// пользователь (они не будут видны в программе изменения настроек),</span></div>
<div class="line">  <span class="comment">// SetDefault() - для параметров, которые пользователь может изменить</span></div>
<div class="line">  <span class="comment">// при необходимости.</span></div>
<div class="line">    </div>
<div class="line">  (*pSettings).AddExtra(uT(<span class="stringliteral">&quot;PathToFontsDirectory&quot;</span>),</div>
<div class="line">    uT(<span class="stringliteral">&quot;data/fonts&quot;</span>));  <span class="comment">// Путь к папке расположения шрифтов, которые </span></div>
<div class="line">                        <span class="comment">// используются в .rcss файлах.</span></div>
<div class="line">  (*pSettings).AddExtra(uT(<span class="stringliteral">&quot;PathToTextureDirectory&quot;</span>),</div>
<div class="line">    uT(<span class="stringliteral">&quot;Data&quot;</span>));        <span class="comment">// Путь к папке расположения текстур, которые </span></div>
<div class="line">                        <span class="comment">// используются в проекте примера.</span></div>
<div class="line">  (*pSettings).AddExtra(uT(<span class="stringliteral">&quot;PathToMeshDirectory&quot;</span>),</div>
<div class="line">    uT(<span class="stringliteral">&quot;Data&quot;</span>));        <span class="comment">// Путь к папке расположения файлов 3D объектов, которые </span></div>
<div class="line">                        <span class="comment">// используются в проекте примера.</span></div>
<div class="line">    </div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;IsFullScreen&quot;</span>),</div>
<div class="line">    <span class="keyword">false</span>, uT(<span class="stringliteral">&quot;Полноэкранный/оконный режим работы программы.&quot;</span>));</div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)].AddExtra(uT(<span class="stringliteral">&quot;IsResized&quot;</span>),</div>
<div class="line">    <span class="keyword">true</span>); <span class="comment">// Разрешение/запрет изменения размеров окна программы мышью.</span></div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;GraphicsApi&quot;</span>), </div>
<div class="line">    uT(<span class="stringliteral">&quot;Auto&quot;</span>), uT(<span class="stringliteral">&quot;Используемый для рендеринга графический Api.&quot;</span>));</div>
<div class="line">    </div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;Size&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;Width&quot;</span>),</div>
<div class="line">    480, uT(<span class="stringliteral">&quot;Ширина клиентской области окна программы.&quot;</span>));</div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;Size&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;Height&quot;</span>),</div>
<div class="line">    762, uT(<span class="stringliteral">&quot;Высота клиентской области окна программы.&quot;</span>));</div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;Size&quot;</span>)].AddExtra(uT(<span class="stringliteral">&quot;MinClientWidth&quot;</span>),</div>
<div class="line">    480); <span class="comment">// Минимальная ширина клиентской области окна программы.</span></div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;Size&quot;</span>)].AddExtra(uT(<span class="stringliteral">&quot;MinClientHeight&quot;</span>),</div>
<div class="line">    480); <span class="comment">// Минимальная высота клиентской области окна программы.</span></div>
<div class="line">    </div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;BackgroundColor&quot;</span>)].AddExtra(uT(<span class="stringliteral">&quot;R&quot;</span>), </div>
<div class="line">    128); <span class="comment">// Цвет фона окна программы по умолчанию: красная компонента [0...255].</span></div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;BackgroundColor&quot;</span>)].AddExtra(uT(<span class="stringliteral">&quot;G&quot;</span>), </div>
<div class="line">    128); <span class="comment">// Цвет фона окна программы по умолчанию: зеленая компонента [0...255].</span></div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;BackgroundColor&quot;</span>)].AddExtra(uT(<span class="stringliteral">&quot;B&quot;</span>), </div>
<div class="line">    128); <span class="comment">// Цвет фона окна программы по умолчанию: синяя компонента [0...255].</span></div>
<div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;BackgroundColor&quot;</span>)].AddExtra(uT(<span class="stringliteral">&quot;A&quot;</span>), </div>
<div class="line">    128); <span class="comment">// Цвет фона окна программы по умолчанию: прозрачность [0...255].</span></div>
<div class="line">    </div>
<div class="line">  <span class="keywordflow">return</span> pSettings;</div>
<div class="line">}</div>
<div class="line">  </div>
<div class="line">} <span class="comment">// namespace std</span></div>
<div class="line">  </div>
<div class="line">} <span class="comment">// namespace extension</span></div>
<div class="line">  </div>
<div class="line">} <span class="comment">// namespace alicorn</span></div>
</div><!-- fragment --><p><a class="anchor" id="ReadFileDataUsingFrameworkAnchor"></a> </p><h2>Настройка чтения данных из файлов </h2>
<p>В код проекта необходимо также добавить реализацию функции настройки способа чтения данных из файлов (в качестве примера приведено использование класса виртуальной файловой системы, который просто читает данные с диска):</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;stdafx.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;alicorn/compress.hpp&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Covellite/App/Vfs.hpp&gt;</span></div>
<div class="line"> </div>
<div class="line">  </div>
<div class="line"><span class="keyword">namespace </span>alicorn</div>
<div class="line">{</div>
<div class="line">  </div>
<div class="line"><span class="keyword">namespace </span>extension</div>
<div class="line">{</div>
<div class="line">  </div>
<div class="line"><span class="keyword">namespace </span>std</div>
<div class="line">{</div>
<div class="line">  </div>
<div class="line"><span class="keyword">using namespace </span>::covellite::app;</div>
<div class="line">    </div>
<div class="line"><span class="keyword">template</span>&lt;&gt;</div>
<div class="line"><span class="comment">/*static*/</span> VfsPtr_t Singleton&lt;VfsCore_t&gt;::Make(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">using</span> ImplPtr_t = ::std::shared_ptr&lt;::alicorn::modules::vfs::IImplementation&gt;;</div>
<div class="line">  <span class="keyword">using</span> ConverterPtr_t = ::std::shared_ptr&lt;::alicorn::modules::vfs::IConverter&gt;;</div>
<div class="line">  <span class="keyword">using</span> CompressorType_t = ::alicorn::source::compress::Snappy_t;</div>
<div class="line">  <span class="keyword">using</span> Compressor_t = ::alicorn::modules::vfs::Compress&lt;CompressorType_t&gt;;</div>
<div class="line"> </div>
<div class="line">  return ::std::make_unique&lt;VfsCore_t&gt;(::std::vector&lt;ImplPtr_t&gt;</div>
<div class="line">  {</div>
<div class="line">    ::std::make_shared&lt;::alicorn::modules::vfs::FileSystem&gt;(<span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line">    ::std::make_shared&lt;::alicorn::modules::vfs::Pack&gt;(<span class="stringliteral">&quot;data/Data.pack&quot;</span>,</div>
<div class="line">      ::std::vector&lt;ConverterPtr_t&gt;{ ::std::make_shared&lt;Compressor_t&gt;() }),</div>
<div class="line">  });</div>
<div class="line">}</div>
<div class="line">  </div>
<div class="line">} <span class="comment">// namespace std</span></div>
<div class="line">  </div>
<div class="line">} <span class="comment">// namespace extension</span></div>
<div class="line">  </div>
<div class="line">} <span class="comment">// namespace alicorn</span></div>
<div class="line"> </div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="aa34955_html_gad03011d9bf6bfcedf9031a4d7cddebfd"><div class="ttname"><a href="a34955.html#gad03011d9bf6bfcedf9031a4d7cddebfd">APPLICATION_ENTRY_POINT</a></div><div class="ttdeci">#define APPLICATION_ENTRY_POINT(MainApplicationClass)</div><div class="ttdoc">Макрос входит в проект Covellite.App   Макрос реализации функции точки входа для приложения.</div><div class="ttdef"><b>Definition:</b> ApplicationEntryPoint.hpp:37</div></div>
<div class="ttc" id="aa36491_html_a3dd1c639961a5e122c07f15ce0041771"><div class="ttname"><a href="a36491.html#a3dd1c639961a5e122c07f15ce0041771">ExampleApp::ExampleApp</a></div><div class="ttdeci">ExampleApp(void) noexcept</div><div class="ttdoc">[Constructor main application class]</div><div class="ttdef"><b>Definition:</b> ExampleApp.cpp:11</div></div>
<div class="ttc" id="aa36491_html"><div class="ttname"><a href="a36491.html">ExampleApp</a></div><div class="ttdoc">Класс входит в проект Example   Класс главного объекта (точка входа) программы.</div><div class="ttdef"><b>Definition:</b> ExampleApp.hpp:22</div></div>
<div class="ttc" id="aa36491_html_aaddf7b9a3ba89e61506f87d2ca3c149d"><div class="ttname"><a href="a36491.html#aaddf7b9a3ba89e61506f87d2ca3c149d">ExampleApp::DoInitWindow</a></div><div class="ttdeci">void DoInitWindow(void)</div><div class="ttdoc">[Create main window]</div><div class="ttdef"><b>Definition:</b> ExampleApp.cpp:57</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a36795.html">Manual</a></li>
    <li class="footer">Документация по Covellite++. Последние изменения: Вт 3 Сен 2019 21:24:39. Создано системой
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
