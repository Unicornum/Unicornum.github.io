<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Covellite++: Manual</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Title.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Covellite++
   &#160;<span id="projectnumber">Version: 2.1.6 Revision: 987 Platform: x64 Build: 20:55 19.10.2018</span>
   </div>
   <div id="projectbrief">Кроссплатформенный (Windows/Android) GUI фреймворк для разработки приложений на С++</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Поиск');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a33908.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Manual </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Подключение к решению </h2>
<ul>
<li>Установить свойство svn:externals с именем Externals и путем <div class="fragment"><div class="line">https:<span class="comment">//svn/svn/Prebuilt.no.backup/Solution/Properties/Utilities/Externals/Alicorn/Covellite/_Root</span></div></div><!-- fragment --></li>
<li>Подключить к страницам свойств решения файл Covellite.props из папки Externals/Covellite.</li>
</ul>
<h1>Использование фреймворка </h1>
<ul>
<li>Создать проект сборки основного модуля программы (<a class="el" href="a33908.html#MainModuleWindowsUsingFrameworkAnchor">Windows</a>/ <a class="el" href="a33908.html#MainModuleAndroidUsingFrameworkAnchor">Android</a>).</li>
<li>Создать .rcss и .rml файлы описания отдельных <a class="el" href="a33908.html#ScreenDescriptionUsingFrameworkAnchor">экранов программы</a>.</li>
<li>Создать <a class="el" href="a33908.html#ScreenClassesUsingFrameworkAnchor">классы</a> отдельных экранов программы.</li>
<li>Создать <a class="el" href="a33908.html#MainWindowClassUsingFrameworkAnchor">класс</a> главного окна программы.</li>
<li>Создать <a class="el" href="a33908.html#MainApplicationClassUsingFrameworkAnchor">класс</a> программы.</li>
<li>Добавить рализация функции установки <a class="el" href="a33908.html#SettingsUsingFrameworkAnchor">параметров</a> фреймворка по умолчанию.</li>
<li>Добавить реализацию функции создания <a class="el" href="a33908.html#ReadFileDataUsingFrameworkAnchor">объекта виртуальной файловой системы</a>, который будет использоваться программой для чтения данных из файлов.</li>
</ul>
<p><a class="anchor" id="MainModuleWindowsUsingFrameworkAnchor"></a> </p><h2>Создание проекта сборки основного модуля программы для Windows </h2>
<p>Создать <b>пустой</b> проект приложения Windows:</p>
<div class="image">
<img src="Vs2015.Windows.png" alt="Vs2015.Windows.png"/>
</div>
<p>Добавить в проект .ico файл иконки программы и .rc файл, определяющий иконку программы как <b>ApplicationIcon</b> (именно эта иконка будет отображаться в заголовке окна программы):</p>
<div class="fragment"><div class="line"></div><div class="line">ApplicationIcon ICON  &quot;ApplicationIcon.ico&quot;</div></div><!-- fragment --><dl class="section note"><dt>Заметки</dt><dd><ul>
<li>В качестве заголовка окна программы будет использовано значение макроса <b>__APPLICATION_NAME__</b> из файла версии решения.</li>
<li>Режим работы (полноэкранный/оконный), размеры и цвет фона окна программы задаются в настройках приложения (название параметров см. в описаниях классов окон).</li>
</ul>
</dd></dl>
<p><a class="anchor" id="MainModuleAndroidUsingFrameworkAnchor"></a> </p><h2>Создание проекта сборки основного модуля программы для Android </h2>
<h3>Создание проекта сборки .apk файла программы</h3>
<p>Создать "Простое приложение Android":</p>
<div class="image">
<img src="Vs2015.Android.png" alt="Vs2015.Android.png"/>
</div>
<p>Добавить в его java код перехват функции dispatchKeyEvent() (как это делается и зачем это нужно, см. <a class="el" href="a33904.html">Ввод русских букв с клавиатуры</a>).</p>
<p><a class="el" href="a33890.html">Фоновое выполнение задач в коде С++</a></p>
<p><br />
 </p><dl class="section note"><dt>Заметки</dt><dd>Чтобы программа работала в полноэкранном режиме (без статус-бара), необходимо добавить в AndroidManifest.xml <div class="fragment"><div class="line">&lt;application ... android:theme=<span class="stringliteral">&quot;@android:style/Theme.Holo.NoActionBar.Fullscreen&quot;</span>&gt;</div></div><!-- fragment --></dd></dl>
<h3>Создание проекта сборки главного модуля программы</h3>
<p>Создать проект .so файла (который будет загружаться при старте NativeActivity):</p>
<div class="image">
<img src="Vs2015.So.png" alt="Vs2015.So.png"/>
</div>
<p>Проекту Packaging добавить его в ссылки, а в AndroidManifest.xml добавить запись загрузки именно этого модуля (подробнее см. <a class="el" href="a33904.html">Ввод русских букв с клавиатуры</a>).</p>
<p><a class="anchor" id="ScreenDescriptionUsingFrameworkAnchor"></a> </p><h2>Создание .rcss и .rml файлов описания отдельных экранов программы </h2>
<p>Как это делается см. в документации/примерах <a href="https://barotto.github.io/libRocketDoc/" title="libRocket">libRocket</a>.</p>
<p><a href="https://barotto.github.io/libRocketDoc/pages/rcss.html" title="libRocket CSS">Доступные css свойства</a>.</p>
<p>Все файлы (.rml, .rcss, .png) следует поместить в папку (Windows - корневая папка программы, Android - папка assets проекта Packaging), пути к этим файлам в программе задаются относительно этой папки, а в самом файле - относительно папки расположения этого файла.</p>
<p>Файлы .rml могут содержать в качестве текста не ASCII символы, но в этом случае их следует сохранять как utf8, а используемые шрифты должны поддерживать соответствующие Unicode символы.</p>
<dl class="section note"><dt>Заметки</dt><dd>Файлы .rcss не должны сохраняться как utf8, т.к. они включаются целиком в состав файлов .rml при парсинге, что приводит к появлению Assert'ов при запуске Debug версии программы.</dd></dl>
<p><a class="anchor" id="ScreenClassesUsingFrameworkAnchor"></a> </p><h2>Создать классы отдельных экранов программы </h2>
<p>Для каждого экрана программы необходимо создать класс-наследник от класса <a class="el" href="a33644.html" title="Класс входит в проект Covellite.Rocket   Класс одного слоя (пользовательского экрана) программы...">covellite::rocket::Layer</a>, передав ему в качестве второго параметра конструктора путь к соответствующему .rml файлу.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span><a class="code" href="a33708.html">ExampleWindow::DemoLayer2</a> final :</div><div class="line">  <span class="keyword">public</span> Layer_t</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="comment">// Интерфейс IWindow:</span></div><div class="line">  <span class="keywordtype">void</span> Subscribe(<span class="keyword">const</span> EventHandlerPtr_t &amp;)<span class="keyword"> override </span>{}</div><div class="line">    </div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">explicit</span> DemoLayer2(IWindowRocket_t &amp; _Window) :</div><div class="line">    Layer_t(_Window, PathToDataDirectory / <span class="stringliteral">&quot;demo2.rml&quot;</span>)</div><div class="line">  {</div><div class="line">    <span class="keyword">using namespace </span>::<a class="code" href="a32667.html">covellite::events</a>;</div><div class="line">      </div><div class="line">    <span class="comment">// Подписываемся на событие нажатия кнопки с идентификатором &quot;id_hello&quot;.</span></div><div class="line">    m_Events[Click.DocumentId(<a class="code" href="a33432.html#a301c71c12e55267b0cb37cea159fb211">GetId</a>()).ElementId(<span class="stringliteral">&quot;id_hello&quot;</span>)]</div><div class="line">      .Connect([&amp;](<span class="keyword">const</span> Click_t::Info &amp;) </div><div class="line">    {</div><div class="line">      <span class="comment">// Действие, выполняемое при нажатии на кнопку id_hello.</span></div><div class="line">      <a class="code" href="a33432.html#a2dc558bad1d0ae39587f5d543d5d2d7a">GetElement</a>(<span class="stringliteral">&quot;multiline_text&quot;</span>).SetText(u8<span class="stringliteral">&quot;Привет!&quot;</span>);</div><div class="line">    });</div><div class="line">  }</div><div class="line">};</div></div><!-- fragment --><p> Если необходим экран с заголовком, содержащим текст, заданный в заголовке .rml файла, создать класс наследник слоя, в конструкторе которого передать базовому классу идентификатор заголовка из его объявления в .rml файле.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span><a class="code" href="a33704.html">ExampleWindow::DemoLayer1</a> final :</div><div class="line">  <span class="keyword">public</span> Layer_t</div><div class="line">{</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="comment">// Интерфейс IWindow:</span></div><div class="line">  <span class="keywordtype">void</span> Subscribe(<span class="keyword">const</span> EventHandlerPtr_t &amp;)<span class="keyword"> override </span>{}</div><div class="line">    </div><div class="line"><span class="keyword">public</span>:</div><div class="line">  <span class="keyword">explicit</span> DemoLayer1(IWindowRocket_t &amp; _Window) :</div><div class="line">    Layer_t(_Window, PathToDataDirectory / <span class="stringliteral">&quot;demo.rml&quot;</span>, <span class="stringliteral">&quot;title&quot;</span>)</div><div class="line">  {</div><div class="line">    <span class="keyword">using namespace </span>::<a class="code" href="a32694.html">alicorn::extension::std</a>;</div><div class="line">      </div><div class="line">    ::alicorn::system::version::Info Info;</div><div class="line">      </div><div class="line">    <a class="code" href="a33432.html#a2dc558bad1d0ae39587f5d543d5d2d7a">GetElement</a>(<span class="stringliteral">&quot;id_header&quot;</span>).SetText(</div><div class="line">      <span class="stringliteral">&quot;&lt;h1&gt;Covellite++ v&quot;</span> + string_cast&lt;::std::string, Locale::UTF8&gt;(</div><div class="line">        Info.GetValue(uT(<span class="stringliteral">&quot;FileVersionShort&quot;</span>))) + <span class="stringliteral">&quot;&lt;/h1&gt;&quot;</span>);</div><div class="line">      </div><div class="line">    <span class="keyword">using namespace </span>::<a class="code" href="a32666.html">covellite</a>;</div><div class="line">      </div><div class="line">    <span class="comment">// При нажатии кнопок слоя генерируем события уровня проекта примера,</span></div><div class="line">    <span class="comment">// которые обрабатываются в классе окна.</span></div><div class="line">    m_Events[events::Click.DocumentId(<a class="code" href="a33432.html#a301c71c12e55267b0cb37cea159fb211">GetId</a>()).ElementId(<span class="stringliteral">&quot;button1&quot;</span>)]</div><div class="line">      .Connect([&amp;]() { m_Events[Example.Button1](); });</div><div class="line">    m_Events[events::Click.DocumentId(<a class="code" href="a33432.html#a301c71c12e55267b0cb37cea159fb211">GetId</a>()).ElementId(<span class="stringliteral">&quot;button2&quot;</span>)]</div><div class="line">      .Connect([&amp;]() { m_Events[Example.Button2](); });</div><div class="line">    m_Events[events::Click.DocumentId(<a class="code" href="a33432.html#a301c71c12e55267b0cb37cea159fb211">GetId</a>()).ElementId(<span class="stringliteral">&quot;button3&quot;</span>)]</div><div class="line">      .Connect([&amp;]() { m_Events[Example.Button3](); });</div><div class="line">    m_Events[events::Click.DocumentId(<a class="code" href="a33432.html#a301c71c12e55267b0cb37cea159fb211">GetId</a>()).ElementId(<span class="stringliteral">&quot;exit&quot;</span>)]</div><div class="line">      .Connect([&amp;]() { m_Events[events::Application.Exit](); });</div><div class="line">  }</div><div class="line">};</div></div><!-- fragment --><p> <a class="anchor" id="MainWindowClassUsingFrameworkAnchor"></a> </p><h2>Создание класса главного окна программы </h2>
<p>Класс главного окна программы отвечает за переключение пользовательских экранов и обработку пользовательского ввода.</p>
<p>Создать класс-наследник от класса <a class="el" href="a33076.html" title="Класс входит в проект Covellite.App   Интерфейсный класс для классов окон фреймворка. ">covellite::app::IWindow</a>, в конструкторе котрого установить набор строк для локализации приложения, добавить стартовый экран программы и подписаться на требующие обработки на уровне окна приложения события.</p>
<div class="fragment"><div class="line"><a class="code" href="a33720.html#a06e017ad06531b774b84328a14f1fc9a">ExampleWindow::ExampleWindow</a>(WindowRocket_t &amp; _WindowRocket) :</div><div class="line">  m_WindowRocket(_WindowRocket),</div><div class="line">  m_Events(_WindowRocket)</div><div class="line">{</div><div class="line">  <span class="comment">// Набор строк локализации приложения.</span></div><div class="line">  m_WindowRocket.Set(</div><div class="line">  {</div><div class="line">    { u8<span class="stringliteral">&quot;[HELLO]&quot;</span>, u8<span class="stringliteral">&quot;Привет&quot;</span> },</div><div class="line">  });</div><div class="line">    </div><div class="line">  <span class="comment">// Экран, который будет отображаться при старте программы.</span></div><div class="line">  m_WindowRocket.PushLayer&lt;DemoLayer1&gt;();</div><div class="line">    </div><div class="line">  <span class="keyword">using namespace </span>::<a class="code" href="a32667.html">covellite::events</a>;</div><div class="line">    </div><div class="line">  <span class="comment">// Подписка на события перехода к другому экрану.</span></div><div class="line">  m_Events[Example.Button1]</div><div class="line">    .Connect([&amp;]() { m_WindowRocket.PushLayer&lt;DemoLayer2&gt;(); });</div><div class="line">  m_Events[Example.Button2]</div><div class="line">    .Connect([&amp;]() { m_WindowRocket.PushLayer&lt;TableLayer&gt;(); });</div><div class="line">  m_Events[Example.Button3]</div><div class="line">    .Connect([&amp;]() { m_WindowRocket.PushLayer&lt;ScrollLayer&gt;(); });</div><div class="line">}</div></div><!-- fragment --> <dl class="section note"><dt>Заметки</dt><dd><ul>
<li>Идентификаторы элементов управления передаются в функцию-обработчик события Click_t в нижнем регистре независимо от того, каким образом они были заданы в .rml файле.</li>
<li>Цвет фона можно задавать как поле <b>background-color</b> для body в .rcss файле, но в этом случае для заполнения всего окна следует в стилях rml и body поставить <div class="fragment"><div class="line">rml</div><div class="line">{</div><div class="line">  top: 0px;</div><div class="line">  left: 0px;</div><div class="line">  width: 100%;</div><div class="line">  height: 100%;</div><div class="line">}</div><div class="line">  </div><div class="line">body</div><div class="line">{</div><div class="line">  top: 0px;</div><div class="line">  left: 0px;</div><div class="line">  width: 100%;</div><div class="line">  height: 100%;</div><div class="line">  background-color: blue;</div></div><!-- fragment --></li>
</ul>
</dd></dl>
<p>В классе окна событие Click_t будет вызываться для всех элементов управления всех активных пользовательских экранов, при этом здесь имеет смысл обрабатывать события, непосредственно связанные с работой окна (переход к другому слою или выход из программы).</p>
<p><a class="el" href="a32650.html">События</a>, которые может обрабатывать окно.</p>
<p><a class="anchor" id="MainApplicationClassUsingFrameworkAnchor"></a> </p><h2>Создание класса программы </h2>
<p>Класс программы содержит главный цикл обработки сообщений, отвечает за обработку системных сообщений и создание/разрушение главного окна программы.</p>
<dl class="section note"><dt>Заметки</dt><dd>При написании кода следует учитывать, что NativeActivity загружает главный модуль программы только один раз, при первом запуске программы, после чего при каждой последующей активации программы вызывает функцию точки входа. При этом объект класса программы будет создаваться каждый раз заново, но все статические объекты будут иметь состояния, унаследованные от предыдущей активации.</dd></dl>
<p>Создать класс-наследник от <a class="el" href="a33036.html" title="Класс входит в проект Covellite.App   Базовый класс приложения для Android. ">covellite::app::Application</a>, конструктору которого передать способ отрисовки окна приложения (по событию или непрерывно), подписаться на необходимые события и добавить код обработки этих событий.</p>
<div class="fragment"><div class="line"><a class="code" href="a33696.html#a3dd1c639961a5e122c07f15ce0041771">ExampleApp::ExampleApp</a>(<span class="keywordtype">void</span>) noexcept :</div><div class="line">  Application(EventBased{})</div><div class="line">{</div><div class="line">  <span class="keyword">using namespace </span>::<a class="code" href="a32666.html">covellite</a>;</div><div class="line">    </div><div class="line">  m_Events[events::Application.Start]</div><div class="line">    .Connect([&amp;]() { DoInitWindow(); } );</div><div class="line">  m_Events[events::Error.Exception]</div><div class="line">    .Connect([](<span class="keyword">const</span> events::Error_t::Description &amp; _Description)</div><div class="line">      { LOGGER(Error) &lt;&lt; _Description.c_str(); });</div><div class="line">  <span class="comment">// ...</span></div></div><!-- fragment --><p> <a class="el" href="a32650.html">События</a>, которые может обрабатывать приложение.</p>
<dl class="section note"><dt>Заметки</dt><dd>Подписка на событие <b>Application.Start</b> обязательна, в обработчике следует создать набор окон программы; в качестве класса главного окна программы следует указать ранее созданный класс. <br />
 Подписка на собыие <b>Application.Exit</b> не требуется, окно будет уничтожено автоматически.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> <a class="code" href="a33696.html#aaddf7b9a3ba89e61506f87d2ca3c149d">ExampleApp::DoInitWindow</a>(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">  LOGGER(Info) &lt;&lt; <span class="stringliteral">&quot;Create main window.&quot;</span>;</div><div class="line">    </div><div class="line">  <span class="comment">// Создание обязательного набора объектов окон приложения.</span></div><div class="line">    </div><div class="line">  MakeWindow&lt;ExampleWindow&gt;(                          <span class="comment">// Клиенсткий код программы.</span></div><div class="line">    MakeWindow&lt;::covellite::gui::Window&gt;(          <span class="comment">// Класс, обеспечивающий отрисовку GUI</span></div><div class="line">      MakeWindow&lt;ExtraWindow&gt;(                        <span class="comment">// Дополнительный код (для примера), производящий </span></div><div class="line">                                                      <span class="comment">// заливку окна цветом перед отрисовкой GUI.</span></div><div class="line">        MakeWindow&lt;::covellite::api::Window&gt;(         <span class="comment">// Класс окна графического Api</span></div><div class="line">                                                      <span class="comment">// (OpenGL или DirectX, задается в настройках).</span></div><div class="line">          MakeWindow&lt;::covellite::os::Window&gt;(*this)  <span class="comment">// Класс окна операционной системы.</span></div><div class="line">            ))));</div><div class="line">}</div></div><!-- fragment --><p> Для создания точки входа программы использовать макрос <b>APPLICATION_ENTRY_POINT</b>, в качестве параметра которого указать имя созданного класса программы.</p>
<div class="fragment"><div class="line"><a class="code" href="a32644.html#gad03011d9bf6bfcedf9031a4d7cddebfd">APPLICATION_ENTRY_POINT</a>(<a class="code" href="a33696.html">ExampleApp</a>);</div></div><!-- fragment --><p> <a class="anchor" id="SettingsUsingFrameworkAnchor"></a> </p><h2>Настройки </h2>
<h3>Для всех платформ</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Параметр  </th><th class="markdownTableHeadLeft">Раздел  </th><th class="markdownTableHeadLeft">Описание   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">PathToFontsDirectory  </td><td class="markdownTableBodyLeft">Root  </td><td class="markdownTableBodyLeft">Путь к папке расположения шрифтов, которые используются в .rcss файлах.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">R  </td><td class="markdownTableBodyLeft">Root\Window\BackgroundColor  </td><td class="markdownTableBodyLeft">Цвет фона окна программы по умолчанию: красная компонента [0...255].   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">G  </td><td class="markdownTableBodyLeft">Root\Window\BackgroundColor  </td><td class="markdownTableBodyLeft">Цвет фона окна программы по умолчанию: зеленая компонента [0...255].   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">B  </td><td class="markdownTableBodyLeft">Root\Window\BackgroundColor  </td><td class="markdownTableBodyLeft">Цвет фона окна программы по умолчанию: синяя компонента [0...255].   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">A  </td><td class="markdownTableBodyLeft">Root\Window\BackgroundColor  </td><td class="markdownTableBodyLeft">Цвет фона окна программы по умолчанию: прозрачность [0...255].   </td></tr>
</table>
<h3>Только для Windows</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Параметр  </th><th class="markdownTableHeadLeft">Раздел  </th><th class="markdownTableHeadLeft">Описание   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">GraphicsApi  </td><td class="markdownTableBodyLeft">Root\Window  </td><td class="markdownTableBodyLeft">Используемый для рендеринга графический Api (OpenGL).   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">IsFullScreen  </td><td class="markdownTableBodyLeft">Root\Window  </td><td class="markdownTableBodyLeft">Полноэкранный/оконный режим работы программы.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">IsResized  </td><td class="markdownTableBodyLeft">Root\Window  </td><td class="markdownTableBodyLeft">Разрешение/запрет изменения размеров окна программы мышью.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyLeft">Width  </td><td class="markdownTableBodyLeft">Root\Window\Size  </td><td class="markdownTableBodyLeft">Ширина клиентской области окна программы.   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">Height  </td><td class="markdownTableBodyLeft">Root\Window\Size  </td><td class="markdownTableBodyLeft">Высота клиентской области окна программы.   </td></tr>
</table>
<h3>Только для Android</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadLeft">Параметр  </th><th class="markdownTableHeadLeft">Раздел  </th><th class="markdownTableHeadLeft">Описание   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyLeft">GraphicsApi  </td><td class="markdownTableBodyLeft">Root\Window  </td><td class="markdownTableBodyLeft">Используемый для рендеринга графический Api (OpenGLES).   </td></tr>
</table>
<h3>Настройки по умолчанию</h3>
<p>В код проекта необходимо также добавить реализацию функции установки значений параметров по умолчанию. Функция <b>в</b> <b>обязательном</b> <b>порядке</b> должна устанавливать значения по умолчанию для всех параметров.</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;stdafx.h&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;Covellite\Core\Settings.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;alicorn\application\current-module.hpp&gt;</span></div><div class="line">  </div><div class="line"><span class="keyword">namespace </span><a class="code" href="a32692.html">alicorn</a></div><div class="line">{</div><div class="line">  </div><div class="line"><span class="keyword">namespace </span>extension</div><div class="line">{</div><div class="line">  </div><div class="line"><span class="keyword">namespace </span><a class="code" href="a32669.html">std</a></div><div class="line">{</div><div class="line">  </div><div class="line"><span class="keyword">template</span>&lt;&gt;</div><div class="line"><span class="comment">/*static*/</span> SectionPtr_t Singleton&lt;Section_t&gt;::Make(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">  <span class="keyword">auto</span> pSettings = ::std::make_unique&lt;Section_t&gt;(uT(<span class="stringliteral">&quot;Covellitepp&quot;</span>));</div><div class="line">    </div><div class="line"><span class="preprocessor"># if BOOST_OS_WINDOWS</span></div><div class="line">    </div><div class="line">  <span class="comment">// Параметры, используемые только в Windows</span></div><div class="line"></div><div class="line">  (*pSettings).AddExtra(uT(<span class="stringliteral">&quot;AppRootPath&quot;</span>),</div><div class="line">    ::alicorn::system::application::CurrentModule::GetAppRootPath());</div><div class="line">    </div><div class="line">  (*pSettings).SetDefault(uT(<span class="stringliteral">&quot;PathToFontsDirectory&quot;</span>),</div><div class="line">    uT(<span class="stringliteral">&quot;{AppRootPath}/data/fonts&quot;</span>),</div><div class="line">    uT(<span class="stringliteral">&quot;Путь к папке расположения шрифтов, которые используются в .rcss файлах.&quot;</span>));</div><div class="line">    </div><div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;IsFullScreen&quot;</span>), <span class="keyword">false</span>,</div><div class="line">    uT(<span class="stringliteral">&quot;Полноэкранный/оконный режим работы программы.&quot;</span>));</div><div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;IsResized&quot;</span>), <span class="keyword">false</span>,</div><div class="line">    uT(<span class="stringliteral">&quot;Разрешение/запрет изменения размеров окна программы мышью.&quot;</span>));</div><div class="line">    </div><div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;Size&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;Width&quot;</span>), 480,</div><div class="line">    uT(<span class="stringliteral">&quot;Ширина клиентской области окна программы.&quot;</span>));</div><div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;Size&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;Height&quot;</span>), 762,</div><div class="line">    uT(<span class="stringliteral">&quot;Высота клиентской области окна программы.&quot;</span>));</div><div class="line">    </div><div class="line"><span class="preprocessor"># elif BOOST_OS_ANDROID</span></div><div class="line">    </div><div class="line">  <span class="comment">// Параметры, используемые только в Android</span></div><div class="line"></div><div class="line">  (*pSettings).SetDefault(uT(<span class="stringliteral">&quot;PathToFontsDirectory&quot;</span>),</div><div class="line">    uT(<span class="stringliteral">&quot;data/fonts&quot;</span>),</div><div class="line">    uT(<span class="stringliteral">&quot;Путь к папке расположения шрифтов, которые используются в .rcss файлах.&quot;</span>));</div><div class="line">        </div><div class="line"><span class="preprocessor"># endif</span></div><div class="line">    </div><div class="line">  <span class="comment">// Общие параметры для всех платформ</span></div><div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;GraphicsApi&quot;</span>), uT(<span class="stringliteral">&quot;Auto&quot;</span>),</div><div class="line">    uT(<span class="stringliteral">&quot;Используемый для рендеринга графический Api.&quot;</span>));</div><div class="line"></div><div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;BackgroundColor&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;R&quot;</span>), 0,</div><div class="line">    uT(<span class="stringliteral">&quot;Цвет фона окна программы по умолчанию: красная компонента [0...255].&quot;</span>));</div><div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;BackgroundColor&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;G&quot;</span>), 0,</div><div class="line">    uT(<span class="stringliteral">&quot;Цвет фона окна программы по умолчанию: зеленая компонента [0...255].&quot;</span>));</div><div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;BackgroundColor&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;B&quot;</span>), 255,</div><div class="line">    uT(<span class="stringliteral">&quot;Цвет фона окна программы по умолчанию: синяя компонента [0...255].&quot;</span>));</div><div class="line">  (*pSettings)[uT(<span class="stringliteral">&quot;Window&quot;</span>)][uT(<span class="stringliteral">&quot;BackgroundColor&quot;</span>)].SetDefault(uT(<span class="stringliteral">&quot;A&quot;</span>), 255,</div><div class="line">    uT(<span class="stringliteral">&quot;Цвет фона окна программы по умолчанию: прозрачность [0...255].&quot;</span>));</div><div class="line">    </div><div class="line">  <span class="keywordflow">return</span> pSettings;</div><div class="line">}</div><div class="line">  </div><div class="line">} <span class="comment">// namespace std</span></div><div class="line">  </div><div class="line">} <span class="comment">// namespace extension</span></div><div class="line">  </div><div class="line">} <span class="comment">// namespace alicorn</span></div></div><!-- fragment --><p><a class="anchor" id="ReadFileDataUsingFrameworkAnchor"></a> </p><h2>Настройка чтения данных из файлов </h2>
<p>В код проекта необходимо также добавить реализацию функции настройки способа чтения данных из файлов (в качестве примера приведено использование класса виртуальной файловой системы, который просто читает данные с диска):</p>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;stdafx.h&quot;</span></div><div class="line"><span class="preprocessor">#include &lt;alicorn\std\singleton.hpp&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;Covellite\Gui\Vfs.hpp&gt;</span></div><div class="line"></div><div class="line">  </div><div class="line"><span class="keyword">namespace </span><a class="code" href="a32692.html">alicorn</a></div><div class="line">{</div><div class="line">  </div><div class="line"><span class="keyword">namespace </span>extension</div><div class="line">{</div><div class="line">  </div><div class="line"><span class="keyword">namespace </span><a class="code" href="a32669.html">std</a></div><div class="line">{</div><div class="line">  </div><div class="line"><span class="keyword">using namespace </span>::<a class="code" href="a32703.html">covellite::gui</a>;</div><div class="line">    </div><div class="line"><span class="keyword">template</span>&lt;&gt;</div><div class="line"><span class="comment">/*static*/</span> VfsPtr_t Singleton&lt;VfsCore_t&gt;::Make(<span class="keywordtype">void</span>)</div><div class="line">{</div><div class="line">  <span class="keyword">using</span> ImplPtr_t = ::std::shared_ptr&lt;::alicorn::modules::vfs::IImplementation&gt;;</div><div class="line">    </div><div class="line">  return ::std::make_unique&lt;VfsCore_t&gt;(::std::vector&lt;ImplPtr_t&gt;</div><div class="line">  {</div><div class="line">    ::std::make_shared&lt;::alicorn::modules::vfs::FileSystem&gt;(<span class="stringliteral">&quot;&quot;</span>)</div><div class="line">  });</div><div class="line">}</div><div class="line">  </div><div class="line">} <span class="comment">// namespace std</span></div><div class="line">  </div><div class="line">} <span class="comment">// namespace extension</span></div><div class="line">  </div><div class="line">} <span class="comment">// namespace alicorn</span></div><div class="line"></div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">notitle</a></li>
    <li class="footer">Документация по Covellite++. Последние изменения: Пт 19 Окт 2018 20:55:52. Создано системой
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
